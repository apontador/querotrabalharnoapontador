var _AK="ShbzzBXad26RMXtvN8VLaw==";
___='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
var _AC=encodeURIComponent("");
var URLHOST="http://www.apontador.com.br";
var _AUR="http://www.apontador.com.br/request.php";
var _AV="0.3";
var base64=function(a){this.password=a;this.encrypt=function(m){var k=___;var j="",h,f,d,g,e,c,b,l=0;do{h=m.charCodeAt(l++);f=m.charCodeAt(l++);d=m.charCodeAt(l++);g=h>>2;e=((h&3)<<4)|(f>>4);c=((f&15)<<2)|(d>>6);b=d&63;if(isNaN(f)){c=b=64}else{if(isNaN(d)){b=64}}j=j+k.charAt(g)+k.charAt(e)+k.charAt(c)+k.charAt(b)}while(l<m.length);return j};this.decrypt=function(m){var k=___;var j="",h,f,d,g,e,c,b,l=0;do{g=k.indexOf(m.charAt(l++));e=k.indexOf(m.charAt(l++));c=k.indexOf(m.charAt(l++));b=k.indexOf(m.charAt(l++));h=(g<<2)|(e>>4);f=((e&15)<<4)|(c>>2);d=((c&3)<<6)|b;j=j+String.fromCharCode(h);if(c!=64){j=j+String.fromCharCode(f)}if(b!=64){j=j+String.fromCharCode(d)}}while(l<m.length);return j}};
try{document.execCommand("BackgroundImageCache",false,true)}catch(err){}String.prototype.trim=function(){_this=this;if(_this.substring(0,1)==" "){_this=_this.substring(1,_this.length);return _this.trim()}else{if(_this.substring(_this.length-1,_this.length)==" "){_this=_this.substring(0,_this.length-1);return _this.trim()}else{return _this}}};String.prototype.matches=function(a){_this=this;if(typeof _this.counter=="undefined"||_this.hasFinished==true){_this.counter=0}if(typeof _this.lastMatch=="undefined"||_this.hasFinished==true){_this.lastMatch=-1}if(_this.hasFinished==true){_this.hasFinished=false}_this.lastMatch=_this.lastMatch+1;_this.lastMatch=_this.indexOf(a,_this.lastMatch);if(_this.lastMatch!=-1){_this.counter++;return _this.matches(a)}else{_this.hasFinished=true;return _this.counter}};String.prototype.replaceAll=function(a,c){_this=this;haystackCount=_this.matches(a);for(var b=0;b<haystackCount;b++){_this=_this.replace(a,c)}return _this};String.prototype.remPx=function(){if(this.substring(0,this.length-2)!=""){return parseFloat(this.substring(0,this.length-2))}else{return 0}};String.prototype.toUpperInitials=function(){holder=this.split(" ");returnStr=[];newStr="";for(var a=0;a<holder.length;a++){initial=holder[a].substr(0,1);initial=initial.toUpperCase();exceptI=holder[a].substr(1).toLowerCase();returnStr.push(initial.concat(exceptI))}return returnStr.join(" ")};String.prototype.toCamelCase=function(){holder=this.split(" ");newPhrase=[];for(var a=0;a<holder.length;a++){if(holder[a].toLowerCase()!="da"&&holder[a].toLowerCase()!="do"&&holder[a].toLowerCase()!="de"&&holder[a].toLowerCase()!="das"&&holder[a].toLowerCase()!="dos"&&holder[a].toLowerCase()!="e"){firstLetter=holder[a].slice(0,1).toUpperCase();rest=holder[a].slice(1).toLowerCase();newPhrase[a]=firstLetter.concat(rest)}else{newPhrase[a]=holder[a].toLowerCase()}}return newPhrase.join(" ")};String.prototype.nl2br=function(){var a=this.replace(/\r\n/g,"<br/>");a=a.replace(/\n/g,"<br/>");a=a.replaceAll("\n","<br/>");a=a.replaceAll("\r\n","<br/>");return a};String.prototype.isNumber=function(){if(!isNaN(parseInt(this))){return parseInt(this)}else{return false}};String.prototype.getJSON=function(){return eval("("+this+")")};String.prototype.eval=function(){return eval("("+this+")")};String.prototype.checkRegexps=function(a){strRet=this;regexpa=new RegExp("[·‡„‰‚]","g");regexpe=new RegExp("[ÈËÍÎ]","g");regexpi=new RegExp("[ÌÏÔÓ]","g");regexpo=new RegExp("[ÛÚıˆÙ]","g");regexpu=new RegExp("[˙˘¸˚]","g");regexpA=new RegExp("[¡¿√ƒ¬]","g");regexpE=new RegExp("[…»À ]","g");regexpI=new RegExp("[ÕÃœŒ]","g");regexpO=new RegExp("[”“’÷‘]","g");regexpU=new RegExp("[⁄Ÿ‹€]","g");regexpc=new RegExp("[Á]","g");regexpC=new RegExp("[«]","g");regexpn=new RegExp("[Ò]","g");regexpN=new RegExp("[—]","g");regexpodd=new RegExp("[\\\\[\\]\\/\\{\\}\\.\\<\\>\\+\\;\\:\\=\\?\\!\\&\\@\\^\\$\\¥\\`\\~\\#\\*\\%\\(\\)\\-\\'\\|\\¶\\ß\\ø\\™\\∫\\∞\\©\\\"]","g");if(a=="normalize"){regexpblank=new RegExp("[ ]","g")}strRet=strRet.replace(regexpa,"a");strRet=strRet.replace(regexpe,"e");strRet=strRet.replace(regexpi,"i");strRet=strRet.replace(regexpo,"o");strRet=strRet.replace(regexpu,"u");strRet=strRet.replace(regexpA,"A");strRet=strRet.replace(regexpE,"E");strRet=strRet.replace(regexpI,"I");strRet=strRet.replace(regexpO,"O");strRet=strRet.replace(regexpU,"U");strRet=strRet.replace(regexpc,"c");strRet=strRet.replace(regexpC,"C");strRet=strRet.replace(regexpn,"n");strRet=strRet.replace(regexpN,"N");strRet=strRet.replace(regexpodd," ");if(a=="normalize"){strRet=strRet.replace(regexpblank,"_")}return strRet};String.prototype.normalizeURI=function(){return this.checkRegexps("normalize")};String.prototype.removeAccents=function(){return this.checkRegexps("accents")};String.prototype.floor=function(){if(!isNaN(parseInt(this))){return Math.floor(parseInt(this))}else{return false}};String.prototype.strip=function(c){if(this.length>=c){return this.substr(0,c)}else{var a=this;for(var b=0;b<(c-a.length);b++){a+="0"}return a}};String.prototype.isNull=function(){if(this!=""){return false}else{return true}};Number.prototype.isNull=function(){if(this!=""){return false}else{return true}};Number.prototype.strip=function(c){var a=""+this;if(a.length>=c){return a.substr(0,c)}else{for(var b=0;b<(c-a.length);b++){a+="0"}return a}};Number.prototype.isNumber=function(){return this};Number.prototype.floor=function(){return Math.floor(this)};Array.prototype.toHashPrefixed=function(a,c){var b={};this.each(function(e,d){b[a+"["+d+"]"]=(c)?e.tocall():e});return $H(b)};var StringBuffer=Class.create({initialize:function(){this.buffer=[]},append:function(a){this.buffer.push(a);return this},toString:function(){return this.buffer.join("")}});var aptBasic=Class.create({initialize:function(){this.functions={GEOCODE:"geo",GEOCODECITY:"geocity",ROUTE:"route",REVGEOCODE:"revgeo"}},getFunction:function(a){for(prop in this.functions){if(prop==a){return this.functions[prop]}}},checkNullness:function(b){if(typeof b!="undefined"&&b!=""&&b!=null){return false}else{if(typeof b=="array"){var a=false;b.each(function(c){if(this.checkNullness(c)){a=false}else{a=true}});return a}else{return true}}}});var aptSlider=Class.create(aptBasic,{initialize:function(c,b,a){if(this.checkNullness(c.size)){return false}else{this.options=c;this.element=c.element;this.holder=c.holder;this.initialHeight=this.element.style.height.remPx();this.element.style.height=c.size+"px";this.element.style.top=this.element.style.top.remPx()-(c.size/2)+"px";this.element.style.backgroundPosition="center left";this.positions={clickStartX:0,clickStartY:0,initialX:0,initialY:0};this.starts={y:this.element.style.top.remPx(),x:this.element.style.left.remPx()};this.constraints={top:(this.element.style.top.remPx()-5),bottom:(this.element.style.top.remPx()+c.size-5)};if(c.step!=""&&c.step>=0){this.step=c.step}else{this.step=1}this.maxTick=c.size/this.step;this.element.onmousedown=this.startMovingSlider.bind(this);this.element.onmousemove=this.movingSlider.bind(this);this.element.onmouseup=this.stopMovingSlider.bind(this);this.holder.onmousedown=this.startMovingSlider.bind(this);this.holder.onmousemove=this.movingSlider.bind(this);this.holder.onmouseup=this.stopMovingSlider.bind(this);this.tick=0;if(!this.checkNullness(b)){this.mother=b}if(!this.checkNullness(a)){this.callback=a}this.cursors=false;if(!this.checkNullness(c.start)){this.moveTo(c.start)}this.clicked=false}},setCallback:function(a){if(!this.checkNullness(a)){this.callback=a}},setCursors:function(){this.cursors=true;this.element.mother=this.mother;this.element.onmouseover=function(){this.mother.setListenersOff();this.mother.grabCursor()};this.element.onmouseout=function(){this.mother.setListenersOn()};this.mother.grabCursor()},moveTo:function(b,a){if(b>=0){if(this.constraints.bottom!=""&&(this.starts.y+(b*this.step))<=this.constraints.bottom){this.element.style.top=this.starts.y+(b*this.step)+"px";this.tick=b;if(!this.checkNullness(this.callback)&&a){this.callback(this)}}}},startMovingSlider:function(a){if(!a){a=window.event}if(this.cursors){this.mother.grabbingCursor()}this.positions.clickStartX=a.clientX;this.positions.clickStartY=a.clientY;this.positions.initialY=this.element.style.top.remPx();this.positions.movedY=null;this.clicked=true},movingSlider:function(a){if(!a){a=window.event}if(this.clicked==true){this.positions.movedY=a.clientY-this.positions.clickStartY;if(typeof this.constraints.top!="undefined"&&typeof this.constraints.bottom!="undefined"){if((this.positions.initialY+this.positions.movedY)>this.constraints.top&&(this.positions.initialY+this.positions.movedY)<this.constraints.bottom){this.element.style.top=this.positions.initialY+this.positions.movedY+"px"}else{this.element.style.top=this.positions.initialY+this.positions.movedY+"px"}}}},stopMovingSlider:function(a){if(!a){a=window.event}if(this.positions.movedY!=0){if(this.positions.movedY>0){this.tick=Math.ceil((this.positions.initialY+this.positions.movedY-this.starts.y)/this.step)}else{this.tick=Math.floor((this.positions.initialY+this.positions.movedY-this.starts.y)/this.step)}if(!this.checkNullness(this.callback)){this.callback(this)}}else{this.moveTo(this.tick)}if(this.cursors){this.mother.grabCursor()}this.clicked=false}});var mathLib=Class.create({initialize:function(a){this.parent=a;this.convert_y=[];this.convert_y[0]=0;this.convert_y[1]=10;this.convert_y[2]=20.154266;this.convert_y[3]=30.796044;this.convert_y[4]=42.343049;this.convert_y[5]=55.397122;this.convert_y[6]=70.95436;this.convert_y[7]=90.95436;this.convert_y[8]=120.192404;this.convert_y[9]=177.780109},getScrollX:function(){var a=0;if(typeof(window.pageXOffset)=="number"){a=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollLeft}}}return a},getScrollY:function(){var a=0;if(typeof(window.pageYOffset)=="number"){a=window.pageYOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){a=document.body.scrollTop}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){a=document.documentElement.scrollTop}}}return a},convertLL:function(b){var a=Math.floor(b/10);if(a>=9){a=8}if(b>=0){return this.convert_y[a]+((b-10*a)/10)*(this.convert_y[a+1]-this.convert_y[a])}else{b=-b;a=-a;a=Math.floor(b/10);return -(this.convert_y[a]+(((b-10*a)/10)*(this.convert_y[a+1]-this.convert_y[a])))}},invertConvertLL:function(b){var a;if(b>=0){for(a=0;a<10;a++){if(b<this.convert_y[a]){return((a-1)*10)+10*(b-this.convert_y[a-1])/(this.convert_y[a]-this.convert_y[a-1])}}a=9;return((a-1)*10)+10*(b-this.convert_y[a-1])/(this.convert_y[a]-this.convert_y[a-1])}else{b=-b;for(a=0;a<10;a++){if(b<this.convert_y[a]){return -(((a-1)*10)+10*(b-this.convert_y[a-1])/(this.convert_y[a]-this.convert_y[a-1]))}}}a=9;return -(((a-1)*10)+10*(b-this.convert_y[a-1])/(this.convert_y[a]-this.convert_y[a-1]))},convertToMinutesAndSeconds:function(b,c,a){var d="";if(b>0){decimalPart=Math.abs(b-Math.floor(b));b=Math.floor(b);if(c=="lat"){d="N"}else{if(c=="lon"){d="E"}}}else{decimalPart=Math.abs(b-Math.ceil(b));b=Math.ceil(b);if(c=="lat"){d="S"}else{if(c=="lon"){d="W"}}}minutes=decimalPart*60;decimalPartOfMinutes=minutes-Math.floor(minutes);minutes=Math.floor(minutes);seconds=Math.floor(decimalPartOfMinutes*60);if(a!="obj"){return Math.abs(Math.floor(b))+"∫ "+minutes+"' "+seconds+'" '+d}else{return{degree:Math.abs(Math.floor(b)),minute:minutes,second:seconds,dir:d}}},getPixelToDegree:function(a){if(this.parent.map){return(this.parent.map.zooms[this.parent.map.zoomSelected]/this.parent.map.tileSize)}else{if(a){return(this.zooms[a]/256)}else{return false}}},convertLatLonToPixel:function(a,b){xT=-(180+parseFloat(a.lon()));yT=-(90-parseFloat(a.lat(1)));xToPixel=(xT/this.getPixelToDegree(b));yToPixel=(yT/this.getPixelToDegree(b));return new aptMapPoint(xToPixel,yToPixel)},convertPixelToLatLon:function(a,b){xToDegree=(a.x*this.getPixelToDegree(b));yToDegree=(a.y*this.getPixelToDegree(b));xToDegree=-180-xToDegree;yToDegree=this.invertConvertLL(90+yToDegree);return new aptGeopoint(yToDegree,xToDegree)}});var aptGeopoint=Class.create({initialize:function(a,b){basics=new aptBasic();math=new mathLib();if(!basics.checkNullness([a,b])){this.latitude=parseFloat(a);this.latConverted=parseFloat(math.convertLL(a));this.longitude=parseFloat(b)}else{return false}},lat:function(a){if(!a){return this.latitude}else{return this.latConverted}},lon:function(){return this.longitude},equals:function(a){try{if(a.lat()==this.lat()&&a.lon()==this.lon()){return true}else{return false}}catch(b){return false}},toString:function(a){if(!a){a="|"}return this.lat()+a+this.lon()}});var aptBoundingBox=Class.create({initialize:function(g,e){if(g.constructor!=Array){this.northwest=g;this.southeast=e}else{var d=null;var c=null;var b=null;var f=null;for(var a=0;a<g.length;a++){if(a==0){d=c=g[a].lat();b=f=g[a].lon()}d=Math.max(g[a].lat(),d);c=Math.min(g[a].lat(),c);b=Math.max(g[a].lon(),b);f=Math.min(g[a].lon(),f)}this.northwest=new aptGeopoint(d,f);this.southeast=new aptGeopoint(c,b)}},equals:function(b){try{if(b.northwest.lat()==this.northwest.lat()&&b.northwest.lon()==this.northwest.lon()&&b.southeast.lat()==this.southeast.lat()&&b.southeast.lon()==this.southeast.lon()){return true}else{return false}}catch(a){return false}},getCenter:function(){var a=(this.northwest.lat()-this.southeast.lat())/2;var b=(this.southeast.lon()-this.northwest.lon())/2;return new aptGeopoint(this.northwest.lat()-a,this.northwest.lon()+b)},contains:function(b){try{if(b.lat()<=this.northwest.lat()&&b.lon()>=this.northwest.lon()&&b.lat()>=this.southeast.lat()&&b.lon()<=this.southeast.lon()){return true}else{return false}}catch(a){return false}}});aptAddress=Class.create({initialize:function(a,i,c,h,j,d,e,g,b,f){this.country=a;this.state=i;this.city=c;this.county=h;this.street=j;this.num=d;this.zipcode=e;this.coordinates=g;this.streetid=b;this.approx=f},toString:function(){var b=$A(arguments);var a="";for(var c=0;c<b.length;c++){switch(b[c]){case"country":a+=(this.country!="")?((c==0)?this.country:", "+this.country):"";break;case"state":a+=(this.state!="")?((c==0)?this.state.toUpperCase():", "+this.state.toUpperCase()):"";break;case"city":a+=(this.city!="")?((c==0)?this.city:", "+this.city):"";break;case"county":a+=(this.county!="")?((c==0)?this.county:", "+this.county):"";break;case"street":a+=(this.street!="")?((c==0)?this.street:", "+this.street):"";break;case"num":a+=(this.num!="")?((c==0)?this.num:", "+this.num):"";break;case"zipcode":a+=(this.zipcode!="")?((c==0)?this.zipcode:", "+this.zipcode):"";break}}return a},toEncodeURI:function(){return this.country+"|"+this.state+"|"+this.city+"|"+this.county+"|"+this.street+"|"+this.num+"|"+this.zipcode+"|"+this.coordinates.lat()+"|"+this.coordinates.lon()+"|"+this.streetid+"|"+this.approx}});var aptBasicShape=Class.create({addVertex:function(a){this.points.push(a)},remove:function(){if(typeof this.map!="undefined"){this.map.removeDraw(this)}}});var aptPolyline=Class.create(aptBasicShape,{initialize:function(a,b){if(!a){return false}var c=[];for(n in a){c[n]=a[n]}this.points=c;if(typeof b!="undefined"){this.options=b}else{this.options=new aptDrawOptions("#0000FF","0.45","4pt","none")}this.id="";this.map="";this.type="polyline"}});var aptPolygon=Class.create(aptBasicShape,{initialize:function(a,b){if(!a){return false}var c=[];for(n in a){c[n]=a[n]}this.points=c;if(typeof b!="undefined"){this.options=b}else{this.options=new aptDrawOptions()}this.id="";this.map="";this.type="polygon"}});var aptDrawOptions=Class.create({initialize:function(d,a,b,c,e){this.color=(d)?d:"#0000FF";this.opacity=(a)?a:"0.45";this.stroke=(b)?b:"4pt";this.fill=(c)?c:"none";this.fillOpacity=(e)?e:"0"}});var aptElement=Class.create({initialize:function(a){this.tree=a;this.counter=0;this.elements=[];this.parse()},parse:function(){for(var a=0;a<this.tree.length;a++){this.counter=a;this.iterate(this.tree[a])}},iterate:function(element){for(prop in element){var prop_evaled=eval("(element."+prop+")");if(prop=="tag"){this.elements[this.counter]=document.createElement(prop_evaled)}else{if(prop!="childs"){var _this=this;if(typeof prop_evaled=="string"){eval("(_this.elements["+this.counter+"]."+prop+' = "'+prop_evaled+'")')}else{if(prop!="style"){eval("(_this.elements["+this.counter+"]."+prop+" = "+prop_evaled+")")}else{if(prop=="style"){for(style in prop_evaled){eval("(_this.elements["+this.counter+"].style."+style+' = "'+eval("(prop_evaled."+style+")")+'")')}}}}}else{var child=new aptElement(prop_evaled);for(var n=0;n<child.elements.length;n++){this.elements[this.counter].appendChild(child.elements[n])}}}}}});var aptRequester=Class.create({initialize:function(b,a,d){this.basics=new aptBasic();this.crypt=new base64("oausiisad9");this.method=(d)?d:"GET";this.requestURL=URLHOST+"/request.php";this.func=this.basics.getFunction(b);if(typeof a=="string"){this.parameters=a}else{a=$A(a);var e="";var c=false;for(var f=0;f<a.length;f++){c=a[f].match("&");e+=(f==0&&!c)?a[f]:"&"+a[f]}this.parameters=e}this.noAjax=false},setFunc:function(a){this.func=this.basics.functions.getValue(a)},setParameters:function(a){this.parameters=a},getCompleteURL:function(){if(this.isRequestComplete()){return this.url+"?"+this.parameters}else{return false}},isRequestComplete:function(){if(!this.basics.checkNullness([this.parameters,this.func,this.method])){return true}else{return false}},withoutAjax:function(a){if(!this.basics.checkNullness(a)){this.noAjax=true;this.noAjaxObj=a}},formatParameters:function(){var a=$H({k:_AK,c:_AC,v:_AV,f:this.func});this.parameters=a.toQueryString()+"&r="+this.crypt.encrypt(this.parameters)},request:function(a,c){if(this.isRequestComplete()&&!this.basics.checkNullness(a)){this.formatParameters();if(!this.noAjax){var b=new Ajax.Request(this.requestURL,{method:this.method,parameters:this.parameters,evalJSON:true,onSuccess:a.bind(c)});return b}else{aptScript(this.getCompleteURL+"&callback="+this.noAjaxObj)}}else{return false}}});var aptCallback=Class.create(aptBasic,{initialize:function(a,c,b){if(arguments.length==3){this.callback=a;this.calleeObj=c;this.args=b}else{if(arguments.length==2&&typeof c!="array"){this.callback=a;this.args=c;this.calleeObj=false}else{if(arguments.length==1&&typeof a=="function"){this.callback=a;this.args=[];this.calleeObj=false}else{return false}}}},call:function(c){var b=this.args;if(typeof c!="undefined"){var a=c.concat(b)}else{var a=this.args}if(this.calleeObj!=false){this.callback.apply(this.calleeObj,a)}else{this.callback.apply(document,a)}}});var aptLayer=Class.create({initialize:function(a){this.map=null;this.childs=[];this.element=null;this.zindex=a},hide:function(){$(this.element).hide()},show:function(){$(this.element).show()},plotIn:function(d,a){if(!this.map||!this.element||!d){return false}var b=this.map.math.convertLatLonToPixel(a,this.map.map.zoomSelected);var c=this.map.math.convertLatLonToPixel(this.map.getBounds().northwest,this.map.map.zoomSelected);d.style.position="absolute";d.style.top=Math.abs(c.y)+(c.y-b.y)+"px";d.style.left=Math.abs(c.x)+(c.x-b.x)+"px";d.coords=a;this.element.appendChild(d);this.childs.push(this.element.lastChild);return this.element.lastChild},replotChilds:function(c){for(var b=0;b<this.childs.length;b++){var a=this.map.math.convertLatLonToPixel(this.childs[b].coords,this.map.map.zoomSelected);this.childs[b].style.top=Math.abs(c.y)+(c.y-a.y)+"px";this.childs[b].style.left=Math.abs(c.x)+(c.x-a.x)+"px"}},removeSelf:function(){this.map.removeLayer(this)},remove:function(a){this.childs.splice(this.child.indexOf(a),1);this.element.removeChild(a)},clear:function(){for(var a=0;a<this.childs.length;a++){this.element.removeChild(this.childs[a])}this.childs=[]},getDepth:function(){return this.element.style.zIndex},setDepth:function(a){this.element.style.zIndex=a}});
var URLMODULES = "http://www.apontador.com.br/apontador_v8/js/modulos/0.3";
var URLPRODUCTS = "http://www.apontador.com.br/produtos";
var URLMAP = "http://map.apontador.com.br/apontador_v8/js/modulos/0.3/php"
aptPage=Class.create({initialize:function(b){this.containers=b}});
aptScript=function(a){var b=document.createElement("script");b.type="text/javascript";b.src=a;document.getElementsByTagName("body")[0].appendChild(b)};aptResponse=function(response,type,objname){if(type=="geocode"){eval("("+objname+".geocode.saveGeoPoint("+response+"))")}else{if(type=="route"){eval("("+objname+".route.onComplete("+response+"))")}else{if(type=="revgeocode"){eval("("+objname+".revgeocode.saveGeoPoint("+response+"))")}else{if(type=="lbsid"){eval("("+objname+".lbsid.savePOI("+response+"))")}}}}};
var __crypt = new base64('oasu89a29');
var autoGeocode=Class.create(aptBasic,{initialize:function(f,b,d,g,a,e,h,c){if(typeof f=="string"&&f!=""){this.input=$(f)}else{if(typeof f=="object"&&f!=""){this.input=f}else{alert("autoGeocode: input de entrada não está definido.");return false}}switch(b){case"city","2",2:this.mode=2;break;default:this.mode=1}if(typeof d=="string"&&d!=""){this.container=$(d)}else{if(typeof d=="object"&&d!=""){this.container=d}}if(typeof this.container!="undefined"&&this.container!=""){this.open=false;this.container.innerHTML="";$(this.container).hide();if(this.input.attachEvent){this.input.attachEvent("onkeydown",this.onKeyDown.bind(this))}else{this.input.onkeydown=this.onKeyDown.bind(this)}if(this.input.attachEvent){this.input.attachEvent("onblur",this.onBlur.bind(this))}else{this.input.onblur=this.onBlur.bind(this)}if(this.input.attachEvent){this.input.attachEvent("onfocus",this.onFocus.bind(this))}else{this.input.onfocus=this.onFocus.bind(this)}}if(typeof g=="number"){this.startTime=g}else{this.startTime=0.5}if(typeof a=="number"){this.startLength=a}else{this.startLength=2}if(typeof e=="string"&&e!=""){this.ignoreValue=e}else{this.ignoreValue=""}switch(h){case"2",2:this.requestType=2;if(typeof c=="string"&&c!=""){this.objname=c}else{alert("autoGeocode: objname náo está definido em modo ajax crossdomain.");return false}break;case"3",3:this.requestType=3;break;default:this.requestType=1;break}this.urlAdressSGS=URLHOST+"/memorygeocode/request?function=addsugg&v=1";this.urlCitySGS=URLHOST+"/memorygeocode/request?function=citysugg&v=1";this.urlGeocoding=URLHOST+"/memorygeocode/request?function=geo&v=1";this.observer=null;this.result=new aptAddress("","","","","","","","","","");this.candidates=new Array();this.verify=false;this.cityInstance=null;this.formatedCity="";this.formatedState="";this.formatedValue="";this.formatedNumber=0;this.wishline=0;this.keyNum=0;this.pars={};this.callBackStart="";this.callBackChanged="";this.callBackSelected="";this.callBackCityAbort="";this.callBackNotFound="";this.callBackEnd="";this.callBackKeyDown="";this.callBackReset="";this.callBackOnblur="";this.callBackOnfocus="";this.firstStart=true;this.defaultCity="";this.defaultState="";this.formatedCountry="BR";this.autoGeocode=false;this.autoSelection=true;this.autoReplaceNumber=true;this.trHeadStyle={backgroundColor:"#ccc",fontWeight:"bold"};this.trOverBackground="#E8EFFB";this.matchColor="#FFF699"},start:function(a){if(typeof a=="object"&&typeof a!="undefined"&&this.firstStart&&this.mode==1){this.cityInstance=a;this.firstStart=false}else{if(this.firstStart&&this.mode==1&&this.defaultCity==""&&this.defaultState==""){alert("autoGeocode: instancia da cidade padrão não está definida.");return false}else{this.firstStart=false}}if(this.observer==null){this.observer=new Form.Element.Observer(this.input,this.startTime,this.sgs.bind(this))}},stop:function(){if(this.observer!=null){this.observer.stop()}this.observer=null;this.reset(true)},setValue:function(f,g){this.stop();this.result=f;switch(this.mode){case 2:this.input.value=f.toString("city","state");break;default:var d=f.toString("street","num").split(",");try{var b=d[0].removeAccents();var a=parseInt(d[1])}catch(c){var b=d[0].removeAccents();var a=0}if(typeof a!="number"||isNaN(a)){a=0}this.input.value=b.trim().toString()+", "+a;break}if(typeof g!="undefined"){this.verify=g}else{this.verify=true}this.start()},reset:function(a){this.result=new aptAddress("","","","","","","","","","");this.formatedCity="";this.formatedState="";this.formatedValue="";this.formatedNumber=0;this.candidates=new Array();this.verify=false;this.pars={};if(a){this.input.value=""}if(typeof this.container!="undefined"){this.open=false;this.container.innerHTML="";$(this.container).hide();this.keyNum=0;this.wishline=0}if(!this.checkNullness(this.callBackReset.call)){this.callBackReset.call()}},sgs:function(a,b){this.reset();this.format();switch(this.mode){case 2:if(b.length>this.startLength&&this.result.city.trim().toString()!=this.formatedCity.trim().toString()&&b.trim().toString().toUpperCase()!=this.ignoreValue.trim().toString().toUpperCase()){this.ajaxSGS({cityState:this.formatedCity,country:this.formatedCountry},this.urlCitySGS,this.sgsCityEnd.bind(this))}break;default:if(this.formatedCity==""&&this.formatedState==""){if(!this.checkNullness(this.callBackCityAbort.call)){this.callBackCityAbort.call()}}else{if(b.trim().toString().toUpperCase()!=this.ignoreValue.trim().toString().toUpperCase()&&b.length>this.startLength&&(this.result.street!=this.formatedValue||this.result.city!=this.formatedCity||this.result.state!=this.formatedState)){this.ajaxSGS({street:this.formatedValue,number:this.formatedNumber,city:this.formatedCity,state:this.formatedState,country:this.formatedCountry},this.urlAdressSGS,this.sgsAddressEnd.bind(this))}}break}},format:function(){switch(this.mode){case 2:try{var f=this.input.value.split(",");try{var d=f[0].removeAccents();var a=f[1].removeAccents()}catch(b){try{var d=f[0].removeAccents();var a=this.defaultState}catch(b){var d=this.defaultCity;var a=this.defaultState}}if(d.trim()==""){d=this.defaultCity}if(a.trim()==""){a=this.defaultState}this.formatedCity=d.trim().toString();this.formatedState=a.trim().toString()}catch(b){this.formatedCity=this.defaultCity;this.formatedState=this.defaultState}break;default:if(typeof this.cityInstance=="object"&&typeof this.cityInstance!="undefined"&&this.cityInstance!=null){if(typeof this.cityInstance.container!="undefined"&&typeof this.cityInstance.container=="object"&&this.cityInstance.container!=""){$(this.cityInstance.container).hide()}if(this.cityInstance.verify){this.formatedCity=this.cityInstance.result.city;this.formatedState=this.cityInstance.result.state}else{this.formatedCity="";this.formatedState=""}}else{this.formatedCity=this.defaultCity;this.formatedState=this.defaultState}try{var c=this.input.value.split(",");try{var h=c[0].removeAccents();var g=parseInt(c[1])}catch(b){try{var h=c[0].removeAccents();var g=0}catch(b){var h="";var g=0}}if(typeof g!="number"||isNaN(g)){g=0}this.formatedValue=h;this.formatedNumber=g}catch(b){this.formatedValue="";this.formatedNumber=0}break}},ajaxSGS:function(a,d,b){if(!this.checkNullness(this.callBackStart.call)){this.callBackStart.call()}switch(this.requestType){case"2",2:aptScript(d+"?"+Object.toQueryString(a)+"&wt=apt&call="+this.objname);break;case"3",3:var c={};var e=gadgets.io.encodeValues(a);c[gadgets.io.RequestParameters.METHOD]=gadgets.io.MethodType.POST;c[gadgets.io.RequestParameters.POST_DATA]=e;gadgets.io.makeRequest(d,b,c);break;default:if(typeof this.ajaxObj!="undefined"){if(this.ajaxObj.transport.readyState!=4){this.ajaxObj.transport.abort()}}this.ajaxObj=new Ajax.Request(d,{method:"get",parameters:a,onSuccess:b});break}},sgsAddressEnd:function(response){if(response.responseText){var Holder=eval("("+response.responseText+")")}else{var Holder=response}if(Holder.length>0){for(var i=0;i<Holder.length;i++){this.candidates[i]=new aptAddress(this.formatedCountry,this.formatedState,this.formatedCity,Holder[i].district,Holder[i].name,this.formatedNumber,"","",Holder[i].streetid)}if(!this.checkNullness(this.callBackChanged.call)){this.callBackChanged.call()}if(typeof this.container!="undefined"&&this.container!=""){var table=new aptElement([{tag:"table",style:{width:"100%",border:"0"},childs:[{tag:"tbody",childs:[{tag:"tr",style:this.trHeadStyle,childs:[{tag:"td",width:"60%",innerHTML:"Endere&ccedil;o "},{tag:"td",width:"10%",innerHTML:"N. "},{tag:"td",width:"30%",innerHTML:"Bairro "}]}]}]}]);for(var i=0;i<this.candidates.length;i++){var row=new aptElement([{tag:"tr",style:{cursor:"pointer"},childs:[{tag:"td",innerHTML:this.findBackground(this.candidates[i].street)},{tag:"td",innerHTML:this.candidates[i].num},{tag:"td",innerHTML:this.candidates[i].county}]}]);Event.observe(row.elements[0],"click",this.onClick.bind(this,i));Event.observe(row.elements[0],"mouseover",this.rollOver.bind(this,i));Event.observe(row.elements[0],"mouseout",this.rollOut.bind(this,i));table.elements[0].childNodes[0].appendChild(row.elements[0])}this.container.appendChild(table.elements[0]);$(this.container).show();this.open=true}}else{if(!this.checkNullness(this.callBackNotFound.call)){this.callBackNotFound.call()}}},sgsCityEnd:function(response){if(response.responseText){var Holder=eval("("+response.responseText+")")}else{var Holder=response}if(Holder.length>0){for(var i=0;i<Holder.length;i++){var placeCity=Holder[i].cityState.split(",");var city=placeCity[0].removeAccents();var state=placeCity[1].removeAccents();this.candidates[i]=new aptAddress(this.formatedCountry,state,city)}if(!this.checkNullness(this.callBackChanged.call)){this.callBackChanged.call()}if(typeof this.container!="undefined"&&this.container!=""){var table=new aptElement([{tag:"table",style:{width:"100%",border:"0"},childs:[{tag:"tbody",childs:[{tag:"tr",style:this.trHeadStyle,childs:[{tag:"td",width:"90%",innerHTML:"Cidade"},{tag:"td",width:"10%",innerHTML:"UF"}]}]}]}]);for(var i=0;i<this.candidates.length;i++){var row=new aptElement([{tag:"tr",style:{cursor:"pointer"},childs:[{tag:"td",innerHTML:this.findBackground(this.candidates[i].city,true)},{tag:"td",innerHTML:this.candidates[i].state}]}]);Event.observe(row.elements[0],"click",this.onClick.bind(this,i));Event.observe(row.elements[0],"mouseover",this.rollOver.bind(this,i));Event.observe(row.elements[0],"mouseout",this.rollOut.bind(this,i));table.elements[0].childNodes[0].appendChild(row.elements[0])}$(this.container).appendChild(table.elements[0]);$(this.container).show();this.open=true}}else{if(!this.checkNullness(this.callBackNotFound.call)){this.callBackNotFound.call()}}},selectCandidate:function(b){switch(this.mode){case 2:this.setValue(this.candidates[b]);if(!this.checkNullness(this.callBackEnd.call)){this.callBackEnd.call()}break;default:this.setValue(this.candidates[b],false);if(!this.checkNullness(this.callBackSelected.call)){this.callBackSelected.call()}if(this.autoGeocode){this.geocode()}var a=this.result;if(this.autoSelection){this.setSelection(this.input,(a.street.length+2),(a.street.length+2+(a.num+"").length))}break}},geocode:function(){switch(this.mode){case 2:if(this.open&&this.candidates.length>0){if(this.wishline!=0){var d=this.wishline-1}else{var d=0}this.selectCandidate(d)}else{if(!this.checkNullness(this.callBackNotFound.call)){this.callBackNotFound.call()}}break;default:try{if(typeof this.result.streetid!="undefined"){var c=this.result.streetid}else{var c=""}var a=c.length();if(a<10){c=""}}catch(f){var c=""}try{if(typeof this.result.county!="undefined"){var b=this.result.county}else{var b=""}}catch(f){var b=""}this.reset();this.format();if(this.formatedCity==""&&this.formatedState==""){if(!this.checkNullness(this.callBackCityAbort.call)){this.callBackCityAbort.call()}}else{if(this.formatedValue=="CENTRO DA CIDADE"){this.formatedValue="";this.formatedNumber=0}this.pars={street:this.formatedValue,num:this.formatedNumber,city:this.formatedCity,state:this.formatedState,streetid:c,county:b};this.ajaxSGS(this.pars,this.urlGeocoding,this.geocodeEnd.bind(this))}break}},geocodeEnd:function(response){if(response.responseText){var Holder=eval("("+response.responseText+")")}else{var Holder=response}if(Holder.approx=="true"){Holder.approx=true}else{Holder.approx=false}var error=false;if(Holder.streetid==""){if(this.pars.street==""&&Holder.street==""&&Holder.x!="0.0"&&Holder.y!="0.0"){Holder.street="CENTRO DA CIDADE";Holder.num=0;Holder.county=""}else{if((this.pars.street!=""&&Holder.street=="")||(Holder.x=="0.0"&&Holder.y=="0.0")){error=true}}}else{Holder.street=this.pars.street;Holder.county=this.pars.county}if(!error){if(!this.autoReplaceNumber){Holder.num=this.pars.num}var result=new aptAddress(this.formatedCountry,this.formatedState,this.formatedCity,Holder.county,Holder.street,parseInt(Holder.num),"",new aptGeopoint(parseFloat(Holder.y),parseFloat(Holder.x)),Holder.streetid.substring(0,9),Holder.approx);this.setValue(result);if(!this.checkNullness(this.callBackEnd.call)){this.callBackEnd.call()}}else{if(!this.checkNullness(this.callBackNotFound.call)){this.callBackNotFound.call()}}},capitAll:function(b){var c=b.toLowerCase();var a=/\b([a-z]+)\b/ig;c=c.replace(a,function(d){return d.charAt(0).toUpperCase()+d.substring(1)});return c},clearSpaces:function(a){if(a.substring(0,1)==" "){a=a.substring(1,a.length);return clearSpaces(a)}else{if(a.substring(a.length-1,a.length)==" "){a=a.substring(0,a.length-1);return clearSpaces(a)}else{return a}}},findBackground:function(b,c){if(c){var e=this.input.value.toUpperCase()}else{var e=this.clearSpaces(this.input.value);e=this.capitAll(e)}e=e.replace(/-/g,"");var a=e.split(" ");var h=b.split(" ");for(var g=0;g<h.length;g++){for(var f=0;f<a.length;f++){h[g]=h[g].replace(a[f],"<span style='background-color: "+this.matchColor+"'>"+a[f]+"</span>")}}var d;d=h.join(" ");return d},onClick:function(a,b){this.selectCandidate(a)},rollOver:function(a){if(this.wishline>=1){this.container.childNodes[0].childNodes[0].childNodes[this.wishline].style.background=""}this.wishline=a+1;this.container.childNodes[0].childNodes[0].childNodes[a+1].style.background=this.trOverBackground},rollOut:function(a){this.container.childNodes[0].childNodes[0].childNodes[a+1].style.background=""},onBlur:function(){if(!this.checkNullness(this.callBackOnblur.call)){this.callBackOnblur.call()}},onFocus:function(){if(!this.checkNullness(this.callBackOnfocus.call)){this.callBackOnfocus.call()}},onKeyDown:function(a){if(window.event){var b=a.keyCode}else{if(a.which){var b=a.which}}var c=this.keyNum;this.keyNum=b;if(b==13||(b==9&&!(c==16||c==17||c==18))){switch(this.mode){case 2:if(this.open&&this.candidates.length>0){if(this.wishline!=0){var d=this.wishline-1}else{var d=0}this.selectCandidate(d)}else{if(this.verify){if(!this.checkNullness(this.callBackEnd.call)){this.callBackEnd.call()}}else{if(!this.checkNullness(this.callBackNotFound.call)){this.callBackNotFound.call()}}}break;default:this.format();if(this.open&&this.candidates.length>0&&this.formatedNumber==0){if(this.wishline!=0){var d=this.wishline-1}else{var d=0}this.selectCandidate(d)}else{this.geocode()}break}return false}else{if(b==40&&this.candidates.length>0&&this.open){if(this.wishline<(this.container.childNodes[0].childNodes[0].childNodes.length-1)){if(this.wishline>=1){this.container.childNodes[0].childNodes[0].childNodes[this.wishline].style.background=""}this.wishline+=1;this.container.childNodes[0].childNodes[0].childNodes[this.wishline].style.background=this.trOverBackground}return false}else{if(b==38&&this.candidates.length>0&&this.open){if(this.wishline>1){this.container.childNodes[0].childNodes[0].childNodes[this.wishline].style.background="";this.wishline-=1;this.container.childNodes[0].childNodes[0].childNodes[this.wishline].style.background=this.trOverBackground}return false}}}if(!this.checkNullness(this.callBackKeyDown.call)){this.callBackKeyDown.call([a,b])}},registerListener:function(a,b){switch(b){case"start":this.callBackStart=a;break;case"changed":this.callBackChanged=a;break;case"selected":this.callBackSelected=a;break;case"abortCity":this.callBackCityAbort=a;break;case"notFound":this.callBackNotFound=a;break;case"end":this.callBackEnd=a;break;case"keyDown":this.callBackKeyDown=a;break;case"onBlur":this.callBackOnblur=a;break;case"onFocus":this.callBackOnfocus=a;break;case"reset":this.callBackReset=a;break}},setSelection:function(b,a,d){if(b.setSelectionRange){b.setSelectionRange(a,d)}else{if(b.createTextRange){var c=b.createTextRange();c.moveStart("character",a);c.moveEnd("character",-b.value.length+d);c.select()}}}});
var cookieApt={get:function(j){var f=j+"=";var h="";if(document.cookie.length>0){var i=document.cookie.indexOf(f);if(i!=-1){i+=f.length;var g=document.cookie.indexOf(";",i);if(g==-1){g=document.cookie.length}h=unescape(document.cookie.substring(i,g))}}return h},set:function(e,h,f){var g=new Date();if(f){g.setDate(g.getDate()+f)}else{g.setDate(g.getDate()+360)}document.cookie=e+"="+escape(h)+";expires="+g.toGMTString()+";path=/"}};
